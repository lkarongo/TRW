{% extends "layout.html" %}

{% block title %}
    {{title}}
{% endblock %}

{% block body %}
    <h3>Advice on actions to be taken</h3>

    {% for address in addresses[-1:] %}
        <h4>Your address {{ address.address }}</h4>
    {% endfor %}

    <script type="text/javascript" src="{{ url_for('static', filename='index.js') }}"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key={{ my_api_key }}&libraries=places"></script>

    <script>
    //I used the google maps javascript api for referece
    // https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete-hotelsearch
        var map, places;
        var markers = [];
        var staterestrict = {'state': 'california'};

            var states = {
                'california': {
                    center: {lat: 36.7783, lng: -119.4179},
                    zoom: 6
                },
                'nevada': {
                    center: {lat: 38.8026, lng: -116.4194},
                    zoom: 7
                }
            };

        //initiating the map
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: states['california'].zoom,
                center: states['california'].center,
                mapTypeControl: false,
                panControl: false,
                zoomControl: false,
                streetViewControl: false
            });

        //This line here I beleive works in conjuction with the 'addlistener' for th autcomplete
        //In the google maps api documentatoin the two lines are together
            places = new google.maps.places.PlacesService(map);

         //This is the function to zoom in after obtaining the details

        function onPlaceChanged() {
            var place = autocomplete.getPlace();
            if (place.geometry) {
                map.panTo(place.geometry.location);
                map.setZoom(15)
                search();
            } else {
                document.getElementById('txtplaces').placeholder = 'Street Address, City, Zip Code';
            }
        }

    }
        google.maps.event.addDomListener(window, 'load', initMap);

    </script>

    <div id="map"></div>

    <a href="/">Go Back</a>

{% endblock %}
